<div
	nz-row
	nzType="flex"
	nzJustify="space-around"
	nzAlign="middle"
	class="collapse-content"
>
	<div nz-col nzSpan="24">
		<div nz-row nzGutter="12" [@listStagger]>
			<!-- Save and Edit Project -->
			<form
				nz-form
				[formGroup]="projectFrom"
				(ngSubmit)="submitForm($event, projectFrom.value)"
			>
				<div
					nz-col
					[nzSpan]="12"
					[nzMd]="12"
					[nzSm]="24"
					[nzXs]="24"
					style="margin-bottom: 10px;"
				>
					<nz-card
						class="card"
						[nzBordered]="false"
						nzTitle="Project Settings"
						[nzExtra]="extraTemplate"
					>
						<nz-form-item>
							<nz-form-label [nzSpan]="5" nzRequired
								>Profile Name</nz-form-label
							>
							<nz-form-control [nzOffset]="0" [nzSpan]="12" nzHasFeedback>
								<input
									nz-input
									formControlName="profile"
									placeholder="Awesome Profile"
								/>
								<nz-form-explain
									*ngIf="
										(projectFrom.get('profile')?.dirty &&
											projectFrom.get('profile')?.errors) ||
										projectFrom.get('profile')?.pending
									"
								>
									<ng-container
										*ngIf="projectFrom.get('profile')?.hasError('required')"
									>
										Please input your Profile Name!
									</ng-container>
									<ng-container
										*ngIf="projectFrom.get('profile')?.hasError('duplicated')"
									>
										The Project name is redundant!
									</ng-container>
									<ng-container *ngIf="projectFrom.get('profile')?.pending">
										Validating...
									</ng-container>
								</nz-form-explain>
							</nz-form-control>
						</nz-form-item>
						<nz-form-item>
							<nz-form-label [nzSpan]="5" nzRequired nzFor="title"
								>Project name</nz-form-label
							>
							<nz-form-control [nzOffset]="0" [nzSpan]="12" nzHasFeedback>
								<input
									nz-input
									name="title"
									type="title"
									id="title"
									formControlName="title"
									placeholder="Awesome title"
								/>
								<nz-form-explain
									*ngIf="
										projectFrom.get('title')?.dirty &&
										projectFrom.get('title')?.error
									"
								>
									Please input your Project Name!
								</nz-form-explain>
							</nz-form-control>
						</nz-form-item>
						<nz-form-item>
							<nz-form-control [nzOffset]="0" [nzSpan]="12">
								<button
									nz-button
									nzType="primary"
									[disabled]="!projectFrom.valid"
								>
									Save Project
								</button>
							</nz-form-control>
						</nz-form-item>
					</nz-card>
					<ng-template #extraTemplate> </ng-template>
				</div>
				<div
					nz-col
					[nzSpan]="12"
					[nzMd]="12"
					[nzSm]="24"
					[nzXs]="24"
					style="margin-bottom: 10px;"
				>
					<nz-card
						class="card"
						[nzBordered]="false"
						nzTitle="HTTP Settings"
						[nzExtra]="extraTemplate"
					>
						<div formGroupName="httpConfigs">
							<nz-form-item *ngFor="let httpConfig of httpConfigs">
								<nz-form-label [nzSpan]="4" [nzFor]="httpConfig.type">{{
									httpConfig.name
								}}</nz-form-label>
								<nz-form-control [nzOffset]="0" [nzSpan]="12" nzHasFeedback>
									<input
										nz-input
										[name]="httpConfig.type"
										[type]="httpConfig.type"
										[id]="httpConfig.type"
										[formControlName]="httpConfig.type"
										[placeholder]="httpConfig.placeholder"
									/>
									<nz-form-explain
										*ngIf="
											projectFrom.get('httpConfig.type')?.dirty &&
											projectFrom.get('httpConfig.type')?.error
										"
									>
										Please input your {{ httpConfig.name }}!
									</nz-form-explain>
								</nz-form-control>
							</nz-form-item>
							<nz-form-item
								class="box"
								*ngFor="let control of controls; let i = index"
							>
								<nz-form-label [nzSpan]="4"> {{ control.label }}</nz-form-label>
								<nz-form-control
									[nzOffset]="0"
									[nzSpan]="20"
									nzErrorTip="Please input value"
								>
									<input
										class="text-input"
										nz-input
										[value]="control.label"
										placeholder="placeholder"
										[attr.id]="control.label"
										[formControlName]="control.label"
									/>
									<i
										nz-icon
										nzType="minus-circle-o"
										class="dynamic-button"
										(click)="removeField(control, $event)"
									></i>
								</nz-form-control>
							</nz-form-item>
							<nz-form-item>
								<nz-form-label [nzSpan]="4">Field Name</nz-form-label>
								<nz-form-control [nzOffset]="0" [nzSpan]="20">
									<input
										class="text-input"
										nz-input
										nzType="dashed"
										placeholder="Http Param"
										(keyup)="storeControllerName($event)"
									/>
									<i
										nz-icon
										class="dynamic-button"
										nzType="plus-circle-o"
										(click)="addField($event)"
									></i>
								</nz-form-control>
							</nz-form-item>
						</div>
					</nz-card>
					<ng-template #extraTemplate> </ng-template>
				</div>
				<ng-container *ngIf="selectProject$ | async as selectProject">
					<div
						nz-col
						[nzSpan]="12"
						[nzMd]="12"
						[nzSm]="24"
						[nzXs]="24"
						style="margin-bottom: 10px;"
						[@listStagger]
						*ngIf="selectProject.profile"
					>
						<nz-card class="card" [nzBordered]="false" nzTitle="Delete Project">
							<button
								nz-button
								nzType="danger"
								(click)="emitDeleteProject(selectProject)"
							>
								<i nz-icon nzType="delete"></i>Delete
							</button>
						</nz-card>
					</div>
				</ng-container>
			</form>
		</div>
	</div>
</div>
