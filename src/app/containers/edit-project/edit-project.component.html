<div [@listStagger]="" class="card" style="padding: 24px;">
	<!-- Header -->
	<nz-page-header nzBackIcon (nzBack)="goBack()">
		<nz-page-header-title
			>{{ (selectedProject$ | async)?.title }}
			{{ (newProject$ | async)?.title }}</nz-page-header-title
		>
		<nz-page-header-subtitle
			>{{ (selectedProject$ | async)?.type }}
			{{ (newProject$ | async)?.type }}</nz-page-header-subtitle
		>
		<nz-page-header-tags>
			<!-- <nz-tag [nzColor]="'red'">Warning</nz-tag> -->
		</nz-page-header-tags>
		<nz-page-header-extra>
			<div *ngIf="selectedProject$ | async as selectedProject">
				<button nzShape="circle" nz-button nzType="default" (click)="open()">
					<i nz-icon nzType="setting"></i>
				</button>
			</div>
		</nz-page-header-extra>
		<nz-page-header-content>
			<div class="wrap">
				<div nz-row class="content padding"></div>
			</div>
		</nz-page-header-content>
	</nz-page-header>
	<!-- Selected Project -->
	<div *ngIf="selectedProject$ | async as selectedProject">
		<ng-container
			add-comp
			[comp]="components[selectedProject['type']]"
			[selectedProject]="selectedProject$"
		></ng-container>
		<!-- Save Selected Project -->
		<app-edit-project
			(formData)="saveFormData($event)"
			[selectedProject]="selectedProject"
			[selectLoggedInUser]="selectLoggedInUser$ | async"
		>
		</app-edit-project>
	</div>
	<!-- New Project -->
	<div *ngIf="newProject$ | async as newProject">
		<ng-container
			add-comp
			[comp]="components[newProject['type']]"
			[selectedProject]="selectedProject$"
		>
		</ng-container>
		<!-- Save New Project -->
		<app-edit-project
			(formData)="saveFormData($event)"
			[selectedProject]="selectLoggedInUser$ | async"
		>
		</app-edit-project>
	</div>
	<!-- Loading Tab -->
	<div *ngIf="!(selectedProject$ | async) && !(newProject$ | async)">
		<div class="loading-template">
			<nz-spin nzSimple nzTip="Loading..."></nz-spin>
		</div>
	</div>
</div>

<nz-drawer
	[nzVisible]="visible"
	[nzWidth]="420"
	nzPlacement="right"
	[nzClosable]="false"
	(nzOnClose)="close()"
	[nzMaskClosable]="true"
	[nzClosable]="true"
>
	<p class="title" style=" margin-bottom: 24px;">Settings</p>
	<div
		nz-row
		nzType="flex"
		nzJustify="space-around"
		nzAlign="middle"
		class="collapse-content"
	>
		<div nz-col nzSpan="24">
			<div nz-row nzGutter="12" [@listStagger]>
				<div
					nz-col
					[nzSpan]="24"
					[nzMd]="24"
					[nzSm]="24"
					[nzXs]="24"
					*ngFor="let setting of settings"
					style="margin-bottom: 10px;"
				>
					<nz-card
						class="card"
						[nzBordered]="false"
						[nzTitle]="setting.placeholder"
						[nzExtra]="extraTemplate"
						><app-short-form [dataInput]="setting"></app-short-form>
					</nz-card>
					<ng-template #extraTemplate> </ng-template>
				</div>
				<div
					nz-col
					[nzSpan]="24"
					[nzMd]="24"
					[nzSm]="24"
					[nzXs]="24"
					style="margin-bottom: 10px;"
				>
					<nz-card class="card" [nzBordered]="false" nzTitle="Delete Project">
						<button
							nz-button
							nzType="danger"
							(click)="deleteProject(selectedProject)"
							style="margin-right: 12px;"
						>
							<i nz-icon nzType="delete"> Delete</i>
						</button>
					</nz-card>
				</div>
			</div>
		</div>
	</div>
</nz-drawer>
